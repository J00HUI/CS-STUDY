### 3.3 혼잡 제거
* 가상 회선 방식을 사용하는 서브넷(Subnet)에서 혼잡을 감지했을 때 이를 완화하는 가장 간단한 방법 중 하나는 혼잡이 사라질 때까지 연결 설정을 허락하지 않는 것이다.    
* 그러나 실제 네트워크에서는 전체보다 일부 지점에서 혼잡이 발생하는 경우가 많다.    
* 따라서 특정 지역에 혼잡이 발생하면 패킷의 전송 경로를 적절히 조정해줌으로써 혼잡이 발생한 곳을 거치지 않도록 가상 회선을 연결하는 방안이 필요하다.   
</br>

* 혼잡을 처리하는 또 다른 방식은 호스트와 서브넷이 가상 회선 연결 과정에서 협상하는 것이다.    
* 즉, 전송 과정에서 사용하는 대역을 미리 할당받음으로써, 네트워크에서 수용 불가능한 정도로 트래픽이 발생하는 일을 사전에 예방하는 것이다.    
* 이 방식의 문제점은 개별 연결을 예약한 전송 대역을 해당 사용자가 이용하지 않더라도 다른 사용자가 이용하지 못한다는 점이다.     
* 따라서 이러한 **자원 예약** (Resource Reservation) 방식은 통신 자원을 낭비할 염려가 있다.     
</br>

* 혼잡 처리와 관련된 또 다른 방식은 그림과 같은 **ECN** (Explicit Congestion Notification) 패킷을 사용하는 것이다.   
* 라우터는 자신의 출력 선로 방향으로 전송되는 트래픽의 양을 모니터할 수 있으므로 출력 선로의 사용 정도가 한계치를 초과하면, 주의 표시를 해둔다.
* 그리고 주의 표시한 방향의 경로는 혼잡이 발생할 가능성이 높기 때문에 특별 관리한다.
</br>

p.235 그림

* 혼잡 지역 위치한 라우터는 입력 선로로 들어온 패킷이 주의 표시된 출력 선로로 라우팅 되는 경우에 패킷의 송신 호스트에 ECN 패킷을 전송한다.(1)   
* ECN 패킷을 수신한 송신 호스트는 데이터 패킷이 전송되는 경로에서 혼잡이 발생할 가능성이 있음을 인지하였으므로 전송 패킷의 양을 줄인다.(2)   
</br>

* 특정 라우터에서 주의 표시를 시작하면, 이후 경로에 위치한 라우터에서도 주의 표시할 가능성이 높아지고, ECN 패킷이 여러 라우터에서 동시에 발생할 가능성이 높다.   
* 따라서 최초로 ECN 패킷을 발생시킨 라우터에서는 전송되는 패킷의 헤더 내부에 ECN-Echo 와 같은 임의의 표시를 하여 목적지까지 도착하는 동안에 거치는 라우터가 ECN 패킷을 더 이상 발생하지 않도록 해야 한다.   
</br>

* ECN 패킷을 받은 송신 호스트는 정해진 비율에 따라 송신 패킷의 양을 줄여서 전송해야 한다.    
* 임의의 시간이 경과한 후에도 ECN 패킷이 계속 들어오면 송신 패킷의 양을 추가로 줄이며, 이러한 과정은 ECN 패킷이 발생하지 않을 때까지 계속된다.   
</br>

## 💎 02 라우팅 프로토콜

