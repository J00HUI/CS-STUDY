### 🔆 Preview

전화 교환기가 중개하는 음성 통신 서비스 시대가, 인터넷으로 대표되는 컴퓨터 통신 환경으로 전환되면서 통신 기술에 많은 발전이 있었다.   
고정 대역의 연속 전송 서비스를 지원하는 회선 교환 시스템은 음성 서비스에 적합하지만, 컴퓨터 네트워크 환경과는 어울리지 않는다.   

컴퓨터 네트워크와 같은 비실시간적인 가변 대역 통신을 지원하기 위해 패킷 교환 시스템이 개발되었다.   
그리고 인터넷으로 영상, 음성 등의 실시간 멀티미디어 서비스가 지원되면서 네트워크 서비스 품질에 대한 요구가 더욱 커지고 있다.   
사용자의 네트워크 서비스 요구 조건을 특성별로 분석하고, 이를 네트워크에서 적절히 지원하는 차등화된 네트워크 서비스가 인터넷에 활발히 도입되고 있다.   

컴퓨터 통신망은 가변적인 대역을 전제로 통신 서비스를 제공하기 때문에, 인터넷을 사용하면 데이터의 전송 속도가 일정하지 않다.   
이러한 가변적인 환경을 이해하려면, 통신망 내부에서 데이터 전송이 어떻게 이루어지는지를 알아야 한다.   
이것이 인터넷에서 사용하는 주요 데이터 서비스 환경인 가상 회선과 데이터 그램 전송 방식에 대해 학습해야 하는 이유이다.   

3장에서는 컴퓨터 통신의 기본 원리인, 패킷 교환 시스템의 구조와 동작 원리에 대하여 설명한다.   
이어서 인터넷이 어떻게 구성되는지, 인터네트워킹이라는 네트워크 연결의 확장이 어떤 원리에 이루어지는지에 대하여 학습한다. *\*(LAN->WAN)?*   
가변 대역의 컴퓨터 통신 환경에서 서비스 품질을 보장하기 위한 기본 개념에 대해서도 알아본다.   
</br>

< 음성 통신 서비스 시대 > -> < 컴퓨터 통신 서비스 시대> => 통신 기술의 발전
| 회선 교환 시스템 | 패킷 교환 시스템 |
|:----------:|:----------:|
| 고정 대역 | 비실시간 |
| 연속 전송 서비스 | 가변 대역 |
| | 데이터 전송 속도 일정 X |
| | * 가상 회선 방식 </br> * 데이터그램 전송 방식 |


## 💎 01 교환 시스템
1. 회선 교환 방식 2. 패킷 교환 방식 +) 3. 프레임 릴레이 방식 4. 셀 릴레이 방식   

그림은 데이터 통신망에서 제공하는 다양한 교환 방식을 설명한다.   
연결형 서비스를 제공하는 **회선 교환 방식** 은 음성 전화 서비스를 통해 발전했으며, 고정 대역폭의 전송률을 지원하므로, 네트워크의 구조가 상대적으로 단순하다.   
반면에, 비연결형 서비스를 제공하는 **패킷 교환 방식** 은 컴퓨터 네트워크를 통해 발전했으며, 가변 대역의 전송률을 지원해 네트워크 구조가 복잡하다.   

이외에도 프레임 릴레이와 셀 릴레이 교환 방식이 있는데, 이는 데이터의 전송 속도를 향상시키는 기술을 접목한 방식이다.   


![image](https://user-images.githubusercontent.com/83942393/128623679-7d6e8e40-eb7b-40e2-a8e3-fe5c4a346f6e.png)
</br>
</br>

**회선 교환** (Circuit Switching) 방식은 고정 대역으로 할당된 연결을 설정하여 데이터 전송을 시작한다.   
* 따라서, 회선에 할당된 고정 크기의 안정적인 전송률로 데이터를 전송할 수 있으며, 연결이 유지되는 동안에는 다른 연결에서 이 대역을 사용할 수 없다.   
* 데이터의 전송 경로가 연결 설정 과정에서 확정되므로, 라우팅 등의 작업이 상대적으로 쉽다.   
</br>

**패킷 교환** (Packet Switching) 방식은 컴퓨터 네트워크 환경에서 주로 이용한다.   
* 데이터를 미리 패킷 단위로 나누어 전송하므로, 패킷을 기준으로 교환 작업이 이루어진다.   
* 패킷 교환 방식은 데이터 전송을 위한 대역을 따로 할당하지 않기 때문에 , 가변 크기의 전송률을 지원한다.   
* 패킷 교환에는 모든 패킷의 경로를 일정하게 유지시키는 **가상 회선** (Virtual Circuit) 방식과 패킷들이 각각의 경로로 전송되는 **데이터그램** (Datagram) 방식이 있다.   
</br>

![image](https://user-images.githubusercontent.com/83942393/128623692-1b81c387-f798-4eac-8f1a-af486071c4f0.png)
</br>
</br>

### 1. 교환 시스템의 종류 
전송 선로를 이용해 데이터를 전송할 때는 **전용 회선** 을 이용하거나 **교환 회선** 을 이용할 수 있다.   
*\*전용 회선 방식에서는 송신 호스트와 수신 호스트가 전용으로 할당된 통신 선로로 데이터를 전송하지만, 교환 회선 방식에서는 전송 선로 하나를 다수의 사용자가 공유한다.*   

일반적으로 전화 서비스와 같은 공중 전화망은 **교환 회선 방식** 을 사용한다.   
그림은 교환 회선 방식을 이용하여 네트워크를 구성한 예이다.   

![image](https://user-images.githubusercontent.com/83942393/128623962-66fce4af-884f-46a2-8187-08a0d1d71af8.png)</br>

그림 3-2 교환 회선 방식을 이용한 네트워크 구성 예   

교환 회선 방식을 이용해 데이터를 주고 받으려면, 중간에 위치한 교환 시스템의 중개가 필요하다.   
그림에서 뭉게구름 안에 있는 교환기와 전송 선로들은 바깥에 있는 호스트들이 데이터를 송수신하기 위해 공유하는 자원이다.   

```
호스트 a 에서 호스트 f 로 데이터를 보내려면, 먼저 연결 설정을 통해 전송 경로를 결정해야 한다.
외형상 가장 합리적인 경로는 교환기 1 -> 교환기 3 -> 교환기 5 이다.
만약 교환기 1과 3 사이에 트래픽이 많은 경우라면, 교환기 1 -> 교환기 2 -> 교환기 3 -> 교환기 5 가 대안이 될 수도 있다.
```

어떤 경로가 더 나을지는 전송 시점에서의 네트워크 혼잡도 등 여러 요인에 따라 달라진다.   
특정 전송 선로에 데이터가 집중되지 않으면서 효율적인 경로를 선택할 수 있도록 하는 것이 교환기의 중요한 역할이다.    
</br>

교환 회선을 이용하는 방식은 논리적 연결 설정 유무에 따라 크게 두 가지로 구분된다.   

* 하나는 그림의 (a)처럼 데이터를 전송하기 전에 통신 양단 사이에 **고정된 연결 경로를 설정** 하는 **회선 교환 방식** 이고,   
* 다른 하나는 (b)처럼 미리 연결을 설정하지 않고, **데이터를 패킷 단위로 나누어 전송** 하는 **패킷 교환 방식** 이다.   
* 이외에 메시지 교환이라는 중간 형태도 있다.   
</br>

![image](https://user-images.githubusercontent.com/83942393/128624099-453630bc-c824-449e-af2d-0d1e3a09c7a2.png)
</br>
</br>

### 1.1 회선 교환
* 회선 교환 방식은 그림의 (a)처럼 통신하고자 하는 호스트가 데이터를 전송하기 전에 연결 경로를 미리 설정하는 방식이다.
* 연결 설정 과정에서 송수신 호스트 간의 경로가 결정되기 때문에, 모든 데이터가 같은 경로로 전달된다.
* 회선 교환 방식은 고정 대역의 논리적인 전송 선로를 전용으로 할당받으므로, 안정적인 데이터 전송률을 지원한다.
</br>

### 1.2 메시지 교환
* 메시지 교환(Message Switching) 방식은 데이터를 전송하기 전에 경로를 미리 설정하지 않고, 대신 전송하는 메시지의 헤더마다 목적지 주소를 표시하는 방식이다.
* 중간의 교환 시스템은 이전 교환 시스템에서 보낸 전체 메시지가 도착할 때까지 받은 메시지를 일시적으로 버퍼에 저장한다.
* 이후 모든 메시지가 도착하면, 다음 교환 시스템으로 전달하는 방식을 사용하므로, 데이터 전송이 교환기 단위로 이어진다.
* 따라서 메시지 교환 방식은 송신 호스트가 전송하는 전체 데이터가 하나의 단위로 교환 처리된다고 볼 수 있다.
* 메시지 교환의 장점은 교환 시스템에서 전송 데이터를 저장하는 기능을 제공하기 때문에 송신 호스트가 보낸 시점과 수신 호스트가 받은 시점이 반드시 일치할 필요가 없다는 것이다.
* 메시지를 메모리에 저장하고, 여러 수신자에게 데이터를 전송할 수 있다.
* 전자우편에서 사용된다.
</br>

### 1.3 패킷 교환
* 그림의 (b) 와 같은 패킷 교환 방식은 회선 교환과 메시지 교환의 장점을 모두 이용한다.
* 송신 호스트는 전송할 데이터를 패킷이라는 일정 크기로 나누어 전송하며, 각 패킷은 독립적으로 라우팅 과정을 거쳐 목적지에 도착한다.
* 패킷 교환 시스템의 장점은 전송 대역의 호율적 이용, 호스트의 무제한 수용, 패킷에 우선순위 부여라는 세 가지로 요약할 수 있다.
</br>

> 전송 대역의 효율적 이용
* 여러 호스트에서 전송한 패킷들이 동적인 방식으로 전송 대역을 공유하기 때문에, 전송 선로의 이용 효율을 극대화할 수 있다.
* 이를 반대의 관점으로 설명할 수 있다.
* 즉 회선 교환 시스템에서는 호스트 간 **연결 시** 전송 대역을 전용으로 할당하기 때문에, 해당 호스트들이 데이터를 전송하지 않더라도 다른 호스트는 이 전송 대역을 이용할 수 없다.
* 결과적으로 회선 교환 시스템은 전송 선로 이용 면에서 비효율적이다.
</br>

> 호스트의 무제한 수용
* 회선 교환 방식에서는 개별 연결 요청에 대해 고정 대역을 할당하므로, 전송 대역이 부족하면 **새로운 연결 설정 요청** 을 수용할 수 없다.
* 즉, 모든 **회선 연결에 할당된 대역의 합** 이 **전체 네트워크의 전송 용량**을 초과할 수 없다.
* 그러나 패킷 교환 방식에서는 전송 대역이 부족해 연결 설정 요청을 수용하지 못하는 경우란 없다.
* 임의의 연결 요청에 고정 대역을 할당하지 않으므로, 이론상 호스트를 무한히 수용할 수 있다.
* 전송 대역을 사용하는 호스트의 수가 늘면, 네트워크의 혼잡도가 높아져, 패킷의 전송 지연이 심화될 뿐이다.
</br>

> 패킷에 우선순위 부여
* 패킷 교환 방식을 이용하면 데이터의 전송 작업이 패킷 단위로 이루어져 패킷에 우선순위를 부여하기 편하다.
* 즉, 특정 호스트가 전송하는 패킷들을 먼저 전송할 패킷과 나중에 전송해도 되는 패킷으로 구분하여 선택적으로 우선순위를 부여할 수 있다.
</br>

패킷 교환 방식에도 단점은 있다.
* 패킷을 전송하는 과정에서 회신 교환 방식에 비해 더 많은 지연이 발생한다.
```
예를 들어, 전송 패킷을 라우터의 내부 버퍼에 보관하는 과정에서 지연이 생기고, 기타 여러 종류의 대기 큐를 거치는 과정에서 가변 지연이 생길 수 있다.
또한, 각각의 전송 패킷이 독립적인 경로로 전달되므로, 패킷마다 전송에 걸리는 시간이 일정하지 않을 수 있다. 
따라서 전체 데이터의 전송 지연 시간은 가장 늦게 도착한 패킷의 전송 지연에 영향을 받는다.
각 패킷별로 지연되는 정도를 나타내는 지연 분포의 형태도 가변적일 수밖에 없는데, 이런 가변적인 전송 지연의 분포를 지터(Jiter)라고 한다.
지터 분포는 멀티미디어 데이터와 같이 실시간으로 처리되는 응용 환경에서 중요하다.
```
</br>

교환기에서 패킷 경로를 선택하는 방식은 두 가지이다.
* 호스트 사이의 전송 경로를 미리 고정하는 **정적 경로** (Static Routing)
* 네트워크 혼잡도를 비롯한 주변 상황에 따라 전송 경로를 지속적으로 조정하는 **동적 경로** (Dynamic Routing)
가 있다.

그러면 컴퓨터 네트워크 환경에서 주로 사용하는 패킷 교환 방식에 대해 좀 더 알아보자.
</br>
</br>

| 회선 교환 시스템 | 패킷 교환 시스템 |
|:----------:|:----------:|
| 고정 대역 | 비실시간 |
| 연속 전송 서비스 | 가변 대역 |
| 연결형 서비스 | 데이터 전송 속도 일정 X |
| 네트워크 구조 단순 | * 가상 회선 방식 </br> * 데이터그램 전송 방식 |
| 안정적인 전송률 | 비연결형 |
| 연결 유지시, 다른 연결에서 이 대역 사용 불가 | 네트워크 구조가 복잡 |
| 전송 경로가 연결 설정 과정에서 확정 </br> -> 라우팅 작업이 쉬움 | 데이터를 패킷으로 나눠 패킷 기준으로 교환 작업 |
| 정적 경로 | 가변 크기의 전송률 |
| | 연결 설정 X |
| | 동적 경로 |
</br>

### 2. 패킷 교환
네트워크 계층의 가장 중요한 역할은 앞에서 언급한 것처럼 **패킷의 전송 경로를 결정** 하는 것이다.   
데이터를 패킷 교환 방식으로 전송하는 네트워크는
1. 가상 회선
2. 데이터 그램   

이라는 두 가지 전송 방식을 지원한다.

가상 회선 방식 : 데이터를 패킷 단위로 나누어 전송하지만, 송수신 호스트 사이에 **가상 연결을 설정** 하므로 **모든 패킷의 전달 경로가 동일** 하다.   
데이터 그램 방식 : **패킷의 경로 선택이 독립적** 으로 이루어진다.   
</br>

### 2.1 가상 회선
가상 회선(Virtual Circuit) 방식은 연결형 서비스를 지원하기 위한 기능으로, 연결을 통해 전송되는 모든 패킷의 경로가 동일하다.

* 송수신 호스트 사이에 설정된 가상의 단일 파이프를 통해, 송신 호스트가 입력단으로 패킷을 송신하고, 수신 호스트가 출력단에서 패킷을 수신한다.
* 따라서 모든 패킷이 하나의 파이프로 표현되는 동일 경로로 전송되므로, 패킷이 도착하는 순서가 보낸 순서와 같다.
```
여기서, 파이프는 한 프로세스의 출력을 다른 프로세스의 입력으로 사용할 수 있도록 프로세스를 연결하는 논리적 통신 매체이다.
프로세스뿐 아니라 호스트, 네트워크 등도 사용할 수 있다.
```
그림은 가상 회선 방식에서 패킷을 전송하는 방식을 시간의 흐름에 따라 보여준다.
* 가상 회선을 통해 모든 패킷이 동일한 경로로 전송되는 것을 볼 수 있다.
* 따라서 이러한 방식에서는 패킷의 도착 순서가 뒤바뀔 수 없다.

![image](https://user-images.githubusercontent.com/83942393/128632345-4c597392-d468-46fc-b505-518744bb3f19.png)
</br>
</br>

```
가상 회선 방식으로 패킷을 전송하는 원리는, 용어에서 유추할 수 있듯이 회선 교환 방식과 비슷하다.
그러나, 가상 회선 방식은 패킷 교환 방식을 기반으로 하므로, 데이터의 전송 단위가 패킷 단위로 이루어지지만, 회선 교환 방식은 패킷 기능을 지원하지 않는다.
이는 두 교환 방식을 구분하는 중요한 차이점이다.
```
</br>

### 2.2 데이터그램





