### 1. IPv6 헤더 구조
그림처럼 IPv6 의 헤더 구조는 IPv4 보다 매우 단순해 9개의 기본 필드를 지원한다.   

<img src="https://user-images.githubusercontent.com/83942393/131241333-008e7cdb-03f5-4bca-b501-d5d07f1de820.png" width="60%" height="90%"></img></br>

* 총 40 바이트 중에서 32바이트는 주소 공간으로 할당
* 8 바이트만 프로토콜 기능을 위해 사용
* IPv6의 패킷 헤더는 기본 헤더와 확장 헤더로 나뉘는데, 위의 그림은 크기가 고정된 기본 헤더의 구조
* 상단의 숫자는 크기를 나타내는 비트
</br>

### 1.1 DS/ECN 필드
* 차등 서비스가 도입되면서, 6비트의 DS 필드와 2비트의 ECN 필드가 정의되었다.
* 이 공간은 원래 4비트의 Priority 필드와 Flow Label 필드의 앞부분 4비트의 공간으로 사용되던 곳이다.
* DS(Differentiated services)와 ECN(Explicit Congestion Notification) 필드에 대한 내용은 IPv4 헤더에서 일부 설명했으며, ECN 기능의 동작 원리에 대해서는 9장 (TCP 프로토콜) 에서 자세히 설명한다.
</br>

### 1.2 Flow Label 필드
* IPv4 에서 생성하는 패킷은 라우터가 중개할 때 동일한 기준을 적용하여 처리한다. 
* IPv6에서는 특정 송수신 호스트 사이에 전송되는 데이터를 하나의 흐름(flow)으로 정의해, 중간 라우터가 이 패킷을 특별한 기준으로 처리할 수 있도록 지원한다.
* 따라서 라우터는 이 기능을 지원하기 위해 필요한 흐름 정보를 저장하여 처리할 수 있어야 한다.
</br>

Flow Label 필드는 음성이나 영상 데이터처럼 실시간 서비스가 필요한 응용 환경에서 사용하는데, 기본 원칙은 다음과 같다.  

* Flow Label 필드를 지원하지 않는 호스트나 라우터에서는 IPv6 패킷을 생성할 때는 반드시 0으로 지정해야 한다. </br> 패킷의 중개 과정에서는 현재 값을 그대로 유지하며, 패킷을 수신하는 측에서는 필드 값을 무시한다.

* Flow Label 필드의 값이 0 이외의 동일한 번호로 부여받은 패킷은 Destination Address, Source Address, Priority, Hop-by-Hop Options Header, Routing Header 등을 모두 동일하게 지정해야 한다. </br> 패킷을 중개하는 라우터가 다른 필드 값을 보지 않고 Flow Label 필드만으로 라우팅 등을 간단히 처리하도록 하기 위함이다.

* Flow Label 필드 값은 최대 범위 내에서 랜덤하게 선택된다. </br> 단, 현재의 전송 흐름에서는 동일 번호가 부여되지 않도록 해야 한다. 
</br>

### 1.3 기타 필드
IPv6의 기본 헤더에 정의된 나머지 필드의 의미는 다음과 같다.   

* Version Number(버전 번호) : IP 프로토콜의 버전 번호, IPv4 와 구분하기 위해 6으로 지정된다.
* 

